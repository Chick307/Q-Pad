(function(t,n){var m={values:[],getByHash:function(a){return this.values[a]},setValue:function(a){return this.values.push(a)-1},get:function(a){return this.getByHash(a.__chuihash__)},set:function(a,b){var c=this.setValue(b);Object.defineProperty(a,"__chuihash__",{enumerable:false,value:c});return c}},p=function(a,b){var c=arguments.callee,d=function(){if(!(this instanceof d))throw new TypeError("constructor error");};if(a!=null)d.prototype=new a;Object.defineProperties(d,{initialize:{value:b||function(){}},
create:{value:function(){var e=Array.prototype.slice.call(arguments),i=new d;d.initialize.apply(i,e);return i}},extend:{value:function(e,i){var f=c(d,e);i!=null&&Object.defineProperties(f.prototype,i);return f}}});return d}(),j=p.extend(function(a,b){m.set(a,this);m.set(this,{dom:a});Object.defineProperties(this,{id:{enumerable:true,get:function(){return a.id},set:function(c){a.id=c}},prevSibling:{enumerable:true,get:function(){var c=a.previousSibling;return c!=null?j.fromDom(c):null}},nextSibling:{enumerable:true,
get:function(){var c=a.nextSibling;return c!=null?j.fromDom(c):null}}});if(b.id!=null)a.id=b.id},{append:{enumerable:false,value:function(){var a=Array.prototype.slice.call(arguments),b=j.toDom(this);a.forEach(function(c){b.appendChild(j.toDom(c))})}},appendTo:{enumerable:false,value:function(a){j.toDom(a).appendChild(j.toDom(this))}}});Object.defineProperties(j,{fromDom:{value:function(a){if(a instanceof p)return a;var b=m.get(a);b||m.set(a,b=j.create(a,{}));return b}},toDom:{value:function(a){if(a instanceof
Node)return a;else if(a instanceof j)return m.get(a).dom;return null}},defineSizeProperty:{value:function(a,b,c){["Width","Height"].forEach(function(d){var e=d.toLowerCase();Object.defineProperty(a,e,{enumerable:true,get:function(){return b["offset"+d]},set:function(i){if(!i||i==="auto"||i==="*")b.style[e]="";else{if(typeof i.valueOf()!=="number")throw new TypeError(e+" only accepts number");b.style[e]=i+"px"}}});if(c[e]!==null)a[e]=c[e]})}},defineTextProperty:{value:function(a,b,c){Object.defineProperty(a,
"text",{get:function(){return b.textContent},set:function(d){b.textContent=d}});if(c.text!=null)a.text=c.text}}});var l=function(a){if(a==null)throw new TypeError("a is required");else if(a instanceof Array)return a.map(l);else if(a instanceof p)return a;else if(a instanceof Node)return j.fromDom(a);if(a.type in t.chui.ui)return l.ui[a.type](a);else if(a.type in t.chui.layout)return l.layout[a.type](a);else throw Error(a.type+" has not be found.");};l.ui={};l.layout={};var o=p.extend(function(a){if(!(this instanceof
o))throw new TypeError("constructor error");m.set(this,{owner:a.owner,onBind:a.onBind})},{bind:{value:function(a){if(typeof a.valueOf()!=="function")throw new TypeError("listener must be function.");var b=m.get(this);b.onBind!=null&&b.onBind.call(b.owner,a)}}});Object.defineProperties(o,{defineClickEvent:{value:function(a,b,c){Object.defineProperty(a,"onClick",{enumerable:true,value:o.create({onBind:function(d){b.addEventListener("click",function(){d.call(a)},false)}})});c.onClick!=null&&a.onClick.bind(c.onClick)}}});
l.font=function(a){return k.create(a==null?{}:a)};var k=p.extend(function(a){m.set(this,{elements:[]});var b=null,c=false,d=false,e=null,i=null,f=null,q=null,h="#000000",u="none";Object.defineProperties(this,{family:{enumerable:true,get:function(){return b},set:function(g){b=String(g);k.setStyle(this,"font-family",b)}},smallCaps:{enumerable:true,get:function(){return c},set:function(g){if(c!==(c=Boolean(g)))k.setStyle(this,"font-variant",c?"small-caps":"normal")}},bold:{enumerable:true,get:function(){return d},
set:function(g){if(d!==(d=Boolean(g)))k.setStyle(this,"font-weight",d?"bold":"normal")}},lineSpace:{enumerable:true,get:function(){return e},set:function(g){k.setStyle(this,"line-height",e=g)}},letterSpace:{enumerable:true,get:function(){return i},set:function(g){i=g==null?"normal":g;k.setStyle(this,"letter-spacing",i)}},wordSpace:{enumerable:true,get:function(){return f},set:function(g){f=g==null?"normal":g;k.setStyle(this,"word-spacing",f)}},size:{enumerable:true,get:function(){return q},set:function(g){q=
typeof g.valueOf()==="number"?g+"px":g;k.setStyle(this,"font-size",q)}},color:{enumerable:true,get:function(){return h},set:function(g){h=g==null?"#000":g;k.setStyle(this,"color",h)}},decoration:{enumerable:true,get:function(){return u},set:function(g){u=g==null?"none":g;k.setStyle(this,"text-decoration",u)}}});["family","size","smallCaps","bold","color","decoration","lineSpace","letterSpace","wordSpace"].forEach(function(g){if(a[g]!=null)data[g]=a[g]})});Object.defineProperties(k,{setStyle:{value:function(a,
b,c){m.get(a).elements.forEach(function(d){d.style[b]=c})}},removeElement:{value:function(a,b){var c=m.get(a);c.elements=c.elements.filter(function(d){return d!==b})}},addElement:{value:function(a,b){m.get(a).elements.push(b);b.style["font-size"]=a.size||"12px";b.style.color=a.color||"#000";b.style["font-family"]=a.family||"";b.style["line-height"]=a.lineSpace||"";b.style["letter-spacing"]=a.letterSpace||"normal";b.style["word-spacing"]=a.wordSpace||"normal";b.style["font-variant"]=a.smallCaps?"small-caps":
"normal";b.style["font-weight"]=a.bold?"bold":"normal";b.style["text-decoration"]=a.decoration}},defineFontProperty:{value:function(a,b,c){var d=null;Object.defineProperty(a,"font",{enumerable:true,get:function(){return d},set:function(e){if(e==null)e=k.create({});else e instanceof k||(e=k.create(e));d!=null&&k.removeElement(d,b);d=e;k.addElement(d,b)}});a.font=c.font!=null?c.font instanceof k?c.font:k.create(c.font):null}}});l.ui.image=function(a){return v.create(n.createElement("img"),a==null?{}:
a)};var v=j.extend(function(a,b){j.initialize.call(this,a,b);a.classList.add("-chui-image");j.defineSizeProperty(this,a,b);Object.defineProperties(this,{url:{enumerable:true,get:function(){return a.getAttribute("src")},set:function(c){c==null?a.removeAttribute("src"):a.setAttribute("src",c)}}});["url"].forEach(function(c){if(b[c]!=null)this[c]=b[c]},this)},{});l.ui.textBlock=function(a){return w.create(n.createElement("div"),a==null?{}:a)};var w=j.extend(function(a,b){j.initialize.call(this,a,b);
a.classList.add("-chui-text-block");var c="",d="none",e=false;j.defineTextProperty(this,a,b);j.defineSizeProperty(this,a,b);k.defineFontProperty(this,a,b);Object.defineProperties(this,{capitalize:{enumerable:true,get:function(){return d==="capitalize"},set:function(f){if(Boolean(f))a.style.textTransform=d="capitalize";else if(d==="capitalize")a.style.textTransform=d="none"}},lowercase:{enumerable:true,get:function(){return d==="lowercase"},set:function(f){if(Boolean(f))a.style.textTransform=d="lowercase";
else if(d==="lowercase")a.style.textTransform=d="none"}},uppercase:{enumerable:true,get:function(){return d==="uppercase"},set:function(f){if(Boolean(f))a.style.textTransform=d="uppercase";else if(d==="uppercase")a.style.textTransform=d="none"}},indent:{enumerable:true,get:function(){return c},set:function(f){if(f==null)f="";else if(typeof f.valueOf()==="number")f+="px";a.style.textIndent=c=f}},selectable:{enumerable:true,get:function(){return e},set:function(f){if(e!==Boolean(f))(e=!e)?a.classList.add("selectable"):
a.classList.remove("selectable")}}});var i=0;["capitalize","lowercase","uppercase"].forEach(function(f){if(b[f]!=null)if(this[f]=b[f])i++},this);if(i>1)throw Error("capitalize, lowercase, and uppercase are exclusive");["selectable","indent"].forEach(function(f){if(b[f]!=null)this[f]=b[f]},this)});ButtonBase=j.extend(function(a,b){j.initialize.call(this,a,b);var c=l.ui.image();c.appendTo(a);var d=n.createElement("span");a.appendChild(d);a.addEventListener("click",function(e){e.stopPropagation()},false);
j.defineTextProperty(this,d,b);j.defineSizeProperty(this,a,b);k.defineFontProperty(this,d,b);Object.defineProperties(this,{image:{enumerable:true,get:function(){return c},set:function(e){if(e)if(e instanceof v){c.url=c.url;c.width=c.width;c.height=c.height}else if(typeof e.valueOf()==="string"){c.url=e;c.width=c.height=null}else{c.url=e.url;c.width=e.width;c.height=e.height}else c.url=c.width=c.height=null}}});["image"].forEach(function(e){if(b[e]!=null)this[e]=b[e]},this)},{});l.ui.button=function(a){return Button.create(n.createElement("button"),
a==null?{}:a)};Button=ButtonBase.extend(function(a,b){ButtonBase.initialize.call(this,a,b);a.classList.add("-chui-button");o.defineClickEvent(this,a,b)},{});l.ui.checkButton=function(a){return x.create(n.createElement("button"),a==null?{}:a)};var r=ButtonBase.extend(function(a,b,c){ButtonBase.initialize.call(this,a,b);var d=false,e=[],i=[],f=[],q=function(){e.forEach(function(h){h.call(this)},this);(d?i:f).forEach(function(h){h.call(this)},this)}.bind(this);a.addEventListener("click",function(){this.checked=
!d}.bind(this),false);Object.defineProperties(this,{checked:{enumerable:true,get:function(){return d},set:function(h){if(d!==(h=Boolean(h)))if(c.call(this,h)){(d=h)?a.classList.add("-chui-checked"):a.classList.remove("-chui-checked");q()}}},onChange:{enumerable:true,value:o.create({owner:this,onBind:function(h){onChangeListeners.push(h)}})},onCheck:{enumerable:true,value:o.create({owner:this,onBind:function(h){i.push(h)}})},onUncheck:{enumerable:true,value:o.create({owner:this,onBind:function(h){f.push(h)}})}});
["checked"].forEach(function(h){if(b[h]!=null)this[h]=b[h]},this);["onChange","onCheck","onUncheck"].forEach(function(h){b[h]!=null&&this[h].bind(b[h])},this)},{check:{value:function(){this.checked=true}},uncheck:{value:function(){this.checked=false}}}),x=r.extend(function(a,b){r.initialize.call(this,a,b,function(){return true});a.classList.add("-chui-check-button")});l.ui.radioButton=function(a){return y.create(n.createElement("button"),a==null?{}:a)};var z={groups:{},get:function(a){var b=this.groups[a];
if(b==null)b=this.groups[a]={members:[],add:function(c){this.members.push(c)},remove:function(c){this.members=this.members.filter(function(d){return d!==c})}};return b}},y=r.extend(function(a,b){if(b.group==null)throw Error("radioButton requires group");var c=b.group,d=z.get(c);d.add(this);r.initialize.call(this,a,b,function(e){e&&d.members.forEach(function(i){if(i!==this)i.checked=false},this);return true});a.classList.add("-chui-radio-button");Object.defineProperties(this,{group:{enumerable:true,
value:c}})}),s=j.extend(function(a,b){j.initialize.call(this,a,b);a.classList.add("-chui-horizontal");var c="horizontal";l(b.contents||[]).forEach(function(d){this.append(d)},this);Object.defineProperties(this,{orientation:{enumerable:true,get:function(){return c},set:function(d){if((d=String(d))!==c)if(d==="horizontal"){c=d;a.classList.add("-chui-horizontal");a.classList.remove("-chui-vertical")}else if(d==="vertical"){c=d;a.classList.add("-chui-vertical");a.classList.remove("-chui-horizontal")}else throw Error("orientation accepts only horizontal or vertical");
}}});["orientation"].forEach(function(d){if(b[d]!=null)this[d]=b[d]},this)});l.layout.linear=function(a){return A.create(n.createElement("div"),a==null?{}:a)};var A=s.extend(function(a,b){s.initialize.call(this,a,b);a.classList.add("-chui-linear")});l.layout.tight=function(a){return B.create(n.createElement("div"),a==null?{}:a)};var B=s.extend(function(a,b){s.initialize.call(this,a,b);a.classList.add("-chui-tight")});t.chui=l})(window,document);