<!DOCTYPE html>
<html lang="ja">
<head>
	<meta charset="utf-8" />
	<link rel="stylesheet" href="css/share.css">
	<script src="js/pref.js"></script>
	<script src="chui.js"></script>
	<link rel="stylesheet" href="chui.css">
</head>
<body>
	<script type="text/javascript">
		var backgroundPage = chrome.extension.getBackgroundPage();
		var pref = new Preference({prefix: 'pref-'});
		window.addEventListener('load', function(){
			backgroundPage.externalServices.forEach(function(service){
				var item = chui({
					type: 'button',
					image: {url: service.icon, width: 24, height: 24},
					width: 300,
					text: service.name,
					onClick: function(){
						service.callback(pref.get('text', ''));
						window.top.close();
					}
				});
				item.font.size = '16px';
				item.appendTo(document.body);
			});
		}, false);
	</script>
</body>
</html>